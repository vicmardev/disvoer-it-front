<mat-stepper labelPosition="bottom" #stepper>
	<!-- step one -->
	<mat-step *ngIf="phaseTicket <= 1">
		<ng-template matStepLabel>1.-Creacion de Ticket</ng-template>
		<div>
			<h1 class="center">1.-Creacion de ticket exitosa.</h1>
			<img class="steperIcon" src="https://cdn0.iconfinder.com/data/icons/activity-2/32/129-128.png">
			<div class="center">
				<h3><span class="info">Tema:</span><b> {{titleTicket}}</b> </h3>
				<h3><span class="info">Fecha de Creación:</span> <b> {{dateCreation | date:'shortDate'}}</b> </h3>
			</div>
			<div fxLayout="row" fxLayoutAlign="center">
				<button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
			</div>
		</div>
	</mat-step>
	<mat-step *ngIf="phaseTicket > 1" [state]="'done'" [completed]="true">
		<ng-template matStepLabel>1.-Creacion de Ticket</ng-template>
		<div>
			<h1 class="center">1.-Creacion de ticket exitosa.</h1>
			<img class="steperIcon" src="https://cdn0.iconfinder.com/data/icons/activity-2/32/129-128.png">
			<div class="center">
				<h3><span class="info">Tema:</span><b> {{titleTicket}}</b> </h3>
				<h3><span class="info">Fecha de Creación:</span> <b> {{dateCreation | date:'shortDate'}}</b> </h3>
			</div>
			<div fxLayout="row" fxLayoutAlign="center">
				<button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
			</div>
		</div>
	</mat-step>
	<!-- <mat-step *ngIf="phaseTicket > 2" [state]="'done'" [completed]="true">
    <ng-template matStepLabel>1.-Creacion de Ticket</ng-template>
    <div>
      <h1 class="center">1.-Creacion de ticket exitosa.</h1>
      <img class="steperIcon" src="https://cdn0.iconfinder.com/data/icons/activity-2/32/129-128.png">
      <div class="center">
        <h3><span class="info">Tema:</span><b> {{titleTicket}}</b> </h3>
        <h3><span class="info">Fecha de Creación:</span> <b> {{dateCreation | date:'shortDate'}}</b> </h3>
        <div fxLayout="row" fxLayoutAlign="center">
          <button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
        </div>
      </div>
    </div>
  </mat-step> -->
	<!-- step two -->
	<mat-step *ngIf="phaseTicket <= 2">
		<ng-template matStepLabel>2.- Detalles de Incidencia</ng-template>
		<app-incident-details [incidentDetails]="selectTicket"></app-incident-details>
	</mat-step>
	<mat-step *ngIf="phaseTicket > 2" [state]="'done'" [completed]="true">
		<ng-template matStepLabel>2.- Detalles de Incidencia</ng-template>
		<app-incident-details [incidentDetails]="selectTicket"></app-incident-details>
	</mat-step>
	<!-- step  3  -->
	<mat-step [stepControl]="responseSupport" *ngIf="phaseTicket <=3">
		<ng-template matStepLabel>3.-Plan de acción</ng-template>
		<div *ngIf="phaseTicket === 2">
			<h3 class="info center">Opción aún no disponible.</h3>
			<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
				<button mat-button matStepperPrevious class="btn-back">Previo</button>
			</div>
		</div>

		<div *ngIf="phaseTicket ===3">
			<h1 class="center">3.-Responder Ticket. </h1>
			<img class="steperIcon"
				src="https://cdn4.iconfinder.com/data/icons/leto-api/64/__api_request_response-256.png">
			<div fxLayout="row" fxLayoutAlign="center">
				<div fxLayout="column" style="width: 50%;" [formGroup]="responseSupport"
					*ngIf="selectTicket.statusTicket != 'Reassigned'">
					<mat-form-field appearance="legacy">
						<mat-label>Status</mat-label>
						<br>
						<mat-select formControlName="statusTicket">
							<mat-option *ngFor="let sev of statusResponse" [value]="sev.value">
								{{sev.name}}
							</mat-option>
						</mat-select>
					</mat-form-field>
					<mat-form-field appearance="legacy">
						<mat-label>Descripcion de la solución</mat-label>
						<br>
						<textarea matInput placeholder="Dirección" cdkAutosizeMinRows="10" cdkAutosizeMaxRows="10"
							cols="10" rows="1" formControlName="solution">
                </textarea>
					</mat-form-field>
					<div>
						<span class="evidence">Evidencia</span>
						<br>
						<br>
						<input type="file" name="file" id="file" accept=".pdf" #fileInput
							formControlName="evidence" (change)="onFileEvent($event)">
					</div>
					<br>
					<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
						<button mat-button matStepperPrevious class="btn-back">Previo</button>
						<button mat-flat-button class="btn-accept" (click)="sendResponse()" mat-button matStepperNext
							[disabled]="isDisabled">Responder</button>
					</div>
				</div>
				<div fxLayout="column" style="width: 50%;" [formGroup]="responseSupportReassign"
					accept=".pdf" #fileInput *ngIf="selectTicket.statusTicket == 'Reassigned'">
					<mat-form-field appearance="legacy">
						<mat-label>Status</mat-label>
						<br>
						<mat-select formControlName="statusTicket">
							<mat-option *ngFor="let sev of statusResponse" [value]="sev.value">
								{{sev.name}}
							</mat-option>
						</mat-select>
					</mat-form-field>
					<mat-form-field appearance="legacy">
						<mat-label>Descripcion de la solución</mat-label>
						<br>
						<textarea matInput placeholder="Dirección" cdkAutosizeMinRows="10" cdkAutosizeMaxRows="10"
							cols="10" rows="1" formControlName="solutionReassig">
            </textarea>
					</mat-form-field>
					<div>
						<span class="evidence">Evidencia</span>
						<br>
						<br>
						<input type="file" name="file" id="file" accept=".pdf" #fileInput
							formControlName="evidenceReassig" (change)="onFileEventReassign($event)">
					</div>
					<br>
					<div fxLayoutAlign="end">
						<button mat-button matStepperPrevious class="btn-back">Previo</button>
						<button mat-flat-button class="btn-accept mgLeft" (click)="sendResponse()" mat-button
							matStepperNext [disabled]="isDisabled">Responder Reasignacion</button>
					</div>
				</div>

			</div>
		</div>
	</mat-step>

	<mat-step *ngIf="phaseTicket >3" [state]="'done'" [completed]="true">
		<ng-template matStepLabel>3.-Plan de acción</ng-template>
		<div>
			<h1 class="center">3.-Ticket.</h1>
			<img class="steperIcon"
				src="https://cdn4.iconfinder.com/data/icons/leto-api/64/__api_request_response-256.png">
			<div fxLayout="row" fxLayoutAlign="center">
				<div fxLayout="column" style="width: 50%;" [formGroup]="responseSupport"
					*ngIf="selectTicket.statusTicket != 'Reassigned'">
					<h3><span class="info">Status: </span> <b>{{spanishStatus}}</b> </h3>
					<h3><span class="info">Descripcion: </span> <b>{{selectTicket.solutionReassig ?
							selectTicket.solutionReassig :
							selectTicket.solution}}</b> </h3>
					<h3><span class="info">Evidencia: </span><b> <a href="{{evidenceURL}}{{selectTicket.evidenceReassig ? 
						selectTicket.evidenceReassig :	
						selectTicket.evidence}}" target="_blank"> Descargar evidencia</a ></b></h3>
				</div>
			</div>
			<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
				<button mat-button matStepperPrevious class="btn-back">Previo</button>
				<button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
			</div>
		</div>
	</mat-step>
	<!-- step  4  -->
	<mat-step *ngIf="phaseTicket < 4" [editable]="false" [completed]="false">
		<ng-template matStepLabel>4-.Información Preliminar</ng-template>
		<h1 class="center">4-Ticket Resuelto.</h1>
		<h3 class="info center">Opción aún no disponible.</h3>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
		</div>
	</mat-step>
	<mat-step *ngIf="phaseTicket >=4" [state]="'done'" [completed]="true">
		<ng-template matStepLabel>4.-Información Preliminar</ng-template>
		<h1 class="center">4-Ticket Resuelto.</h1>
		<app-preliminary-info [preliminaryInfo]="selectTicket"> </app-preliminary-info>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
			<button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
		</div>
	</mat-step>
	<!-- step  5  -->
	<mat-step [editable]="false" *ngIf="phaseTicket < 5" [completed]="false">
		<ng-template matStepLabel>5-.Aprobacion del cliente</ng-template>
		<h1 class="center">5-.Aprobacion del cliente</h1>
		<h3 class="info center">Opción aún no disponible.</h3>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
		</div>
	</mat-step>
	<mat-step *ngIf="phaseTicket ==5">
		<ng-template matStepLabel>5.-Aprobacion del cliente</ng-template>
		<h1 class="center">5-Aprobación de la solución.</h1>
		<img style="margin-left: 48%;width: 54px;"
			src="https://cdn4.iconfinder.com/data/icons/e-learning-color/64/resources-search-research-review-256.png">

		<h3 class="info center">Si el flujo del ticket es correcto, selecciona el boton de aprobar para continuar.</h3>
		<h3 class="info center">En caso de alguna inconformidad, reasignar el ticket.</h3>
		<div fxLayoutAlign="center">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
			<button mat-flat-button class="btn-cancel" style=" margin-left: 10px;"
				(click)="OpenDialogReassignTicket(selectTicket)">Reasignar</button>
			<button mat-flat-button class="btn-accept" style=" margin-left: 10px;"
				(click)="OpenDialogAproveTicket(selectTicket)">Aprobar</button>
		</div>
	</mat-step>

	<!-- Step 5 -->
	<mat-step *ngIf="phaseTicket >5" [state]="'done'" [completed]="true">
		<ng-template matStepLabel>5.-Aprobacion del cliente</ng-template>
		<h1 class="center">5-Aprobación de la solución.</h1>
		<img style="margin-left: 48%;width: 54px;"
			src="https://cdn4.iconfinder.com/data/icons/e-learning-color/64/resources-search-research-review-256.png">

		<h1 class="center info">El Ticket fue aprobado.</h1>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
			<button mat-raised-button class="btn-accept" style="width: auto;" matStepperNext>Siguiente</button>
		</div>

	</mat-step>

	<!-- step  6  -->
	<mat-step *ngIf="phaseTicket < 6" [editable]="false" [completed]="false">
		<ng-template matStepLabel>6-.Cierre y Descarga</ng-template>
		<h1 class="center">6-.Descarga de Ticket en PDF.</h1>
		<h3 class="info center">Opción aún no disponible.</h3>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
		</div>
	</mat-step>
	<mat-step [editable]="isEditable" *ngIf="phaseTicket >= 6">
		<ng-template matStepLabel>6.-Cierre y Descarga</ng-template>
		<h1 class="center">6.-Descarga de Ticket en PDF.</h1>
		<app-close-download [stepperCloseDownload]="selectTicket"></app-close-download>
		<div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="40px">
			<button mat-button matStepperPrevious class="btn-back">Previo</button>
			<!-- <button (click)="openDialogStarRating(selectTicket)">modal</button> -->
		</div>
	</mat-step>
</mat-stepper>