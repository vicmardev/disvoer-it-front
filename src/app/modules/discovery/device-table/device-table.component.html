<!-- device table show if -->
<div class="bottom">
	<div class="bottom">
		<table
			mat-table
			#outerSort="matSort"
			[dataSource]="dataSource"
			multiTemplateDataRows
			class="mat-elevation-z8"
			matSort>
			<ng-container matColumnDef="{{ column }}" *ngFor="let column of columnsToDisplay">
				<div *ngIf="column == 'Type'">
					<th mat-header-cell *matHeaderCellDef>
						{{ column }}
					</th>
					<td mat-cell *matCellDef="let element">
						<div class="rowImg">
							<img
								src="assets/icons/{{ element[column] | lowercase }}.svg"
								width="30"
								height="30"
								class="image" />
							<span class="text">{{ element[column] }}</span>
						</div>
					</td>
				</div>

				<div *ngIf="column != 'createdAt' && column != 'updatedAt'">
					<th mat-header-cell *matHeaderCellDef>
						{{ column }}
					</th>
					<td mat-cell *matCellDef="let element">{{ element[column] }}</td>
				</div>

				<div *ngIf="column == 'createdAt' || column == 'updatedAt'">
					<th mat-header-cell *matHeaderCellDef>{{ column }}</th>
					<td mat-cell *matCellDef="let element">{{ element[column] }}</td>
				</div>
			</ng-container>

			<!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
			<ng-container matColumnDef="expandedDetail">
				<td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
					<div
						class="example-element-detail"
						*ngIf="element.components?.data.length"
						[@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
						<div class="inner-table mat-elevation-z8" *ngIf="expandedElement">
							<mat-form-field>
								<input
									matInput
									(keyup)="applyFilter($event.target)"
									placeholder="Filter" />
							</mat-form-field>
							<table
								#innerTables
								mat-table
								#innerSort="matSort"
								[dataSource]="element.components"
								matSort>
								<ng-container
									matColumnDef="{{ innerColumn }}"
									*ngFor="let innerColumn of innerDisplayedColumns">
									<th mat-header-cell *matHeaderCellDef>
										{{ innerColumn }}
									</th>
									<td mat-cell *matCellDef="let element">
										{{ element[innerColumn] }}
									</td>
								</ng-container>
								<tr
									class="header"
									mat-header-row
									*matHeaderRowDef="innerDisplayedColumns"></tr>
								<tr mat-row *matRowDef="let row; columns: innerDisplayedColumns"></tr>
							</table>
						</div>
					</div>
				</td>
			</ng-container>

			<tr class="header" mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
			<tr
				mat-row
				*matRowDef="let element; columns: columnsToDisplay"
				[class.example-element-row]="element.components?.data.length"
				[class.example-expanded-row]="expandedElement === element"
				(click)="toggleRow(element)"></tr>
			<tr
				mat-row
				*matRowDef="let row; columns: ['expandedDetail']"
				class="example-detail-row"></tr>
		</table>
	</div>
	<div class="table-footer"></div>
</div>
