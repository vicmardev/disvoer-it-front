<div fxLayout="column">
	<!-- top row of buttons -->
	<div class="header" fxLayout="row" fxLayoutAlign="end end" fxFill>
		<div fxLayoutGap="20px">
			<button
				mat-fab
				color="warn"
				matTooltip="Agregar CotizaciÃ³n"
				(click)="openDialog(undefined, undefined, 'add')">
				<mat-icon>add</mat-icon>
			</button>

			<button
				class="filter-button"
				mat-fab
				matTooltip="Quitar filtros"
				[ngClass]="!filterApplied ? 'filter-disabled' : 'filter-enabled'"
				(click)="clearFilters()"
				[disabled]="!filterApplied"></button>
		</div>
	</div>
	<br />
	<!-- table div -->
	<div fxFlex="100" class="quotesTable" fxLayout="column" fxFill>
		<mat-progress-bar
			class="audio-progress-bar"
			mode="indeterminate"
			*ngIf="!quoteList"></mat-progress-bar>

		<table
			mat-table
			[dataSource]="dataSource"
			class="mat-elevation-z8"
			multiTemplateDataRows>
			<!-- Customer -->
			<ng-container matColumnDef="Customer">
				<th mat-header-cell *matHeaderCellDef>
					<mat-label>Costumer</mat-label>
					<mat-select
						class="header-filter"
						placeholder="Filtrar"
						*ngIf="quoteFilters && quoteFilters.Customers.values.length > 1"
						[(ngModel)]="selectors.customer"
						(selectionChange)="filterSelects($event, quoteFilters?.Customers)">
						<mat-option
							*ngFor="let op of quoteFilters?.Customers.values"
							[value]="op.value">
							{{ op.viewValue }}
						</mat-option>
					</mat-select>
				</th>
				<td mat-cell *matCellDef="let row">
					{{ row.CustomerName }}
				</td>
			</ng-container>
			<!-- Customer -->

			<!-- Quote -->
			<ng-container matColumnDef="Quote">
				<th mat-header-cell *matHeaderCellDef>
					<mat-label>Quote</mat-label>
					<mat-select
						class="header-filter"
						placeholder="Filtrar"
						[(ngModel)]="selectors.quote"
						(selectionChange)="filterSelects($event, quoteFilters?.QuoteStatus)">
						<mat-option
							*ngFor="let op of quoteFilters?.QuoteStatus.values"
							[value]="op.value">
							{{ op.viewValue }}
						</mat-option>
					</mat-select>
				</th>
				<td mat-cell *matCellDef="let row">
					{{ row.QuoteStatus }}
				</td>
			</ng-container>
			<!-- Quote -->

			<!-- Folio -->
			<ng-container matColumnDef="Folio">
				<th mat-header-cell *matHeaderCellDef>Folio</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Folio }}
				</td>
			</ng-container>
			<!-- Folio -->

			<!-- Lead -->
			<ng-container matColumnDef="Lead">
				<th mat-header-cell *matHeaderCellDef>Lead</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Lead }}
				</td>
			</ng-container>
			<!-- Lead -->

			<!-- Currency -->
			<ng-container matColumnDef="Currency">
				<th mat-header-cell *matHeaderCellDef>Currency</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Currency }}
				</td>
			</ng-container>
			<!-- Currency -->

			<!-- Subtotal -->
			<ng-container matColumnDef="Subtotal">
				<th mat-header-cell *matHeaderCellDef>Subtotal</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Subtotal | currency: row.Currency }}
				</td>
			</ng-container>
			<!-- Subtotal -->

			<!-- IVA -->
			<ng-container matColumnDef="IVA">
				<th mat-header-cell *matHeaderCellDef>IVA</th>
				<td mat-cell *matCellDef="let row">{{ row.IVA }}%</td>
			</ng-container>
			<!-- IVA -->

			<!-- Total -->
			<ng-container matColumnDef="Total">
				<th mat-header-cell *matHeaderCellDef>Total</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Total | currency: 'MXN' }}
				</td>
			</ng-container>
			<!-- Total -->

			<!-- Status -->
			<ng-container matColumnDef="Status">
				<th mat-header-cell *matHeaderCellDef>
					<mat-label>Status</mat-label>
					<mat-select
						class="header-filter"
						placeholder="Status"
						[(ngModel)]="selectors.status"
						(selectionChange)="filterSelects($event, quoteFilters?.Status)">
						<mat-option *ngFor="let op of quoteFilters?.Status.values" [value]="op.value">
							{{ op.viewValue }}
						</mat-option>
					</mat-select>
				</th>
				<td mat-cell *matCellDef="let row">
					{{ row.Status }}
				</td>
			</ng-container>
			<!-- Status -->

			<!-- Remark -->
			<ng-container matColumnDef="Remark">
				<th mat-header-cell *matHeaderCellDef>Remark</th>
				<td mat-cell *matCellDef="let row; let i = index">
					<span class="div-info">{{ row.Remark != 'Null' ? row.Remark : '' }}</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="Acciones">
				<th mat-header-cell *matHeaderCellDef>Acciones</th>
				<td mat-cell *matCellDef="let row; let i = index">
					<button
						mat-icon-button
						[matMenuTriggerFor]="menu"
						aria-label="Example icon-button with a menu"
						(click)="actionsClick(row); $event.stopPropagation()">
						<mat-icon>more_vert</mat-icon>
					</button>

					<mat-menu #menu="matMenu">
						<a mat-menu-item href="{{ row.UrlFile }}" target="_blank">
							<mat-icon>cloud_download</mat-icon>
							<span>Descargar Archivo</span>
						</a>
						<button
							mat-menu-item
							aria-label="Update quote"
							(click)="openDialog(row, row.Id, 'edit')">
							<mat-icon>edit</mat-icon>
							<span>Actualizar</span>
						</button>
						<button
							mat-menu-item
							aria-label="Delete quote"
							(click)="openDialog(undefined, row.Id, 'delete')">
							<mat-icon>delete</mat-icon>
							<span>Eliminar</span>
						</button>
					</mat-menu>
				</td>
			</ng-container>

			<!-- Remark -->

			<tr
				mat-header-row
				*matHeaderRowDef="displayedColumns"
				(mouseover)="highLightOn = false"></tr>
			<tr
				mat-row
				*matRowDef="let row; columns: displayedColumns; let i = dataIndex"
				[ngClass]="{
					highlight: selectedQuote === i
				}"
				class="example-element-row"
				(click)="selectQuote(row)"
				(mouseover)="highLightOn = false"></tr>
		</table>
		<mat-paginator
			[pageSizeOptions]="[15, 30, 50]"
			showFirstLastButtons
			aria-label="Select page of quote elements"></mat-paginator>
	</div>
	<div class="table-footer"></div>
</div>
